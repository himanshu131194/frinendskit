module.exports=function(e){var t={};function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=29)}([function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,o,n={env:"production",port:process.env.PORT||8080,API_URL:"https://feelfunny.app",MONGO_URI:"mongodb+srv://feelfunny:feelfunny123@cluster0-ekrsc.mongodb.net/test?retryWrites=true&w=majority",COOKIEKEY:"mycookiesecret",DB:{DEFAULT_COUNT:0,DEFAULT_CONTENT_TYPE:1,DEFAULT_TRUE:!0,DEFAULT_FALSE:!1,DEFAULT_ACCOUNT_TYPE:0,GENDER:{MALE:1,FEMALE:2,OTHER:3},BADGETS:{NOOBIE:1,PRO:2},CRAWLED_TYPE:{DEFAULT:0,FB:1,GAG:2}},S3:{BUCKET:"stylemycv",URL:"https://stylemycv.s3.ap-south-1.amazonaws.com",ACCESS:"AKIA3YIPQLXVUZ3S3UD7",SECRET:"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",PASSWORD:"WMwQ}t%c(XqR"},LOGIN_KEYS:{GOOGLE:{CLIENT:"38122336055-7stkqff3vae90il94e1p12tp0pq26a4h.apps.googleusercontent.com",SECRET:"Czvtwg5Is_ZZwdVPEwUAoR8c"}},MESSAGES:{100:"post has beeb added successfully",101:"section has been added successfully"},ERRORS:{100:"something went wrong, please try to post again"},USER:{POST_TYPES:{UPLOADED:1,LIKED:2,COMMENTED:3}},JWT_SECRET:"himanshu@1234",ACCESS_TOKEN:"0z6v8b4uua"};t.a=n,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(n,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/config/index.js"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)}).call(this,r(2)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,r){"use strict";(function(e){var a,o=r(21),n=r(22),s=r(6),i=r(14),d=r(8),u=r(15),l=r(23),c=r(10),p=(r(32),r(0)),f=r.n(p),m=r(1),v=r(24),y=r.n(v),b=r(25),g=r.n(b),h=r(16),_=r.n(h);function L(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o,n=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function k(e,t,r,a,o,n,s){try{var i=e[n](s),d=i.value}catch(e){return void r(e)}i.done?t(d):Promise.resolve(d).then(a,o)}function j(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var n=e.apply(t,r);function s(e){k(n,a,o,s,i,"next",e)}function i(e){k(n,a,o,s,i,"throw",e)}s(void 0)}))}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var w=new g.a.S3({accessKeyId:m.a.S3.ACCESS,secretAccessKey:m.a.S3.SECRET,region:"ap-south-1"});r(33).schedule("*/2 * * * *",j(regeneratorRuntime.mark((function e(){var t,r,a,o,n,i,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("running a task every 2 min"),e.next=3,c.a.aggregate([{$group:{_id:"$source",count:{$sum:1},section:{$first:"$section"}}}]);case 3:return t=e.sent,r=t[function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(0,t.length-1)],a=r._id,o=r.section,e.next=7,c.a.findOne({source:a.trim(),post_uploaded:!1});case 7:if(n=e.sent){e.next=10;break}return e.abrupt("return",res.status(200).send({data:[]}));case 10:return e.next=13,c.a.findOneAndUpdate({_id:n._id,source:a.trim(),post_uploaded:!1},{post_uploaded:!0},{new:!0});case 13:return i=e.sent,e.next=16,s.a.findOne({crawled_source_url:i.url.trim(),crawled:!0});case 16:if(!e.sent){e.next=21;break}return console.log("alredy exits post"),console.log(i.url.trim()),e.abrupt("return");case 21:return d={user_id:"5e7ea43f9cf4640b79d58e6c",url:i.s3_url.trim(),slugId:i.slug_id.trim(),title:i.title,crawled:!0,crawled_source:i._id,crawled_source_url:i.url.trim(),section:o,mime_type:i.mime_type.trim(),ext:i.ext.trim()},i.mime_type.indexOf("video")>=0&&(d.content_type=2),u=new s.a(d),e.prev=24,e.next=27,u.save();case 27:return e.sent,console.log("post uploaded successfully"),e.abrupt("return");case 32:return e.prev=32,e.t0=e.catch(24),console.log(e.t0),e.abrupt("return");case 36:case"end":return e.stop()}}),e,null,[[24,32]])}))));var D,S,H,x,O,E,U,T,R,A,I,$,C,M,N,P,B={listSections:(M=j(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.find({});case 3:a=e.sent,r.status(200).send({data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send({error:m.a.ERRORS[100]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return M.apply(this,arguments)}),listTags:(C=j(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.a.find({});case 3:a=e.sent,r.status(200).send({data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send({error:m.a.ERRORS[100]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return C.apply(this,arguments)}),uploadImagetoS3:($=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,s,i,d,u,l,c,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=null,o=null,n=null,s=["jpg","jpeg","png","webp","gif"],t.body.url||!t.body.data64){e.next=8;break}a=Buffer.from(t.body.data64.replace(/^data:image\/\w+;base64,/,""),"base64"),n=t.body.ext,e.next=14;break;case 8:return e.next=10,_()({url:t.body.url,encoding:null});case 10:a=e.sent,i=new Buffer(a),n=t.body.url.split(".").pop(),o="data:image/".concat(n,";base64,")+i.toString("base64");case 14:return n=s.indexOf(n)<0?"jpg":n,d=y()(),u=a,l="image/".concat(n),c="posts/".concat(d,".").concat(n),p={Bucket:m.a.S3.BUCKET,Key:c,Body:u,ContentType:l},e.next=22,w.putObject(p).promise();case 22:return e.sent,e.abrupt("return",r.status(200).send({url:"https://".concat(m.a.S3.BUCKET,".s3.ap-south-1.amazonaws.com/").concat(c),key:c,slug:d,base64:o,mime:l,ext:n}));case 26:return e.prev=26,e.t0=e.catch(0),e.abrupt("return",r.status(400).send({error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[0,26]])}))),function(e,t){return $.apply(this,arguments)}),uploadPost:(I=j(regeneratorRuntime.mark((function e(t,r){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user_id:t.user?t.user._id:"5e12110169481b125b9d0cb6",url:t.body.uploadedURL.trim(),slugId:t.body.postSlug.trim(),title:t.body.postTitle.trim(),section:t.body.postSections,mime_type:t.body.postMime.trim(),ext:t.body.postExt.trim()},t.body.postMime.indexOf("video")>=0&&(a.content_type=2),o=new s.a(a),e.prev=3,e.next=6,o.save();case 6:return e.sent,e.abrupt("return",r.status(200).send({data:m.a.MESSAGES[100]}));case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",r.status(400).send({error:m.a.ERRORS[100]}));case 13:case"end":return e.stop()}}),e,null,[[3,10]])}))),function(e,t){return I.apply(this,arguments)}),listOfUsersPosts:(A=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,u,l,c,p,v,y,b,g,h,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=m.a.USER.POST_TYPES,o=a.COMMENTED,n=a.LIKED,u=!1,l=[],e.t0=parseInt(t.body.filters.value),e.next=e.t0===n?6:e.t0===o?10:14;break;case 6:return e.next=8,i.a.find({user_id:f.a.Types.ObjectId(t.user._id),is_active:!0},{_id:0,post_id:1});case 8:return l=e.sent,e.abrupt("break",16);case 10:return e.next=12,d.a.find({user_id:f.a.Types.ObjectId(t.user._id),is_active:!0},{_id:0,post_id:1});case 12:return l=e.sent,e.abrupt("break",16);case 14:return u=!0,e.abrupt("break",16);case 16:if(c=null,p=[],u)c={is_active:!0,user_id:f.a.Types.ObjectId(t.user._id)};else{v=L(l);try{for(v.s();!(y=v.n()).done;)b=y.value,p.push(b.post_id)}catch(e){v.e(e)}finally{v.f()}c={is_active:!0,_id:{$in:p}}}return e.prev=19,g=parseInt(t.body.offset)||0,h=parseInt(t.body.limit)||2,e.next=23,s.a.aggregate([{$match:c},{$lookup:{from:"sections",localField:"section",foreignField:"_id",as:"section_details"}},{$unwind:"$section_details"},{$lookup:{from:"liked_posts",let:{liked_post:"$_id"},pipeline:[{$match:{$expr:{$eq:["$post_id","$$liked_post"]},user_id:f.a.Types.ObjectId(t.user._id),is_active:!0}}],as:"liked"}},{$project:{like_count:1,comment_count:1,share_count:1,download_count:1,user_id:1,url:1,title:1,section:1,mime_type:1,ext:1,created:1,liked:{$size:"$liked"},"section_details._id":1,"section_details.value":1,"section_details.url":1}},{$sort:{created:-1}}]).skip(g).limit(h);case 23:_=e.sent,r.status(200).send({data:_}),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(19),r.status(400).send({error:m.a.ERRORS[100]});case 30:case"end":return e.stop()}}),e,null,[[19,27]])}))),function(e,t){return A.apply(this,arguments)}),listPosts:(R=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,i,d,u,l,c,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={is_active:!0},e.prev=1,o=parseInt(t.body.offset)||0,n=parseInt(t.body.limit)||2,i=t.user?f.a.Types.ObjectId(t.user._id):0,d=t.body,u=d.section,l=d.tag,u&&(a.section=f.a.Types.ObjectId(u.trim())),l&&(a.tag={$in:[f.a.Types.ObjectId(l.trim())]}),e.next=8,s.a.count();case 8:return c=e.sent,e.next=11,s.a.aggregate([{$match:a},{$lookup:{from:"sections",localField:"section",foreignField:"_id",as:"section_details"}},{$unwind:"$section_details"},{$lookup:{from:"liked_posts",let:{liked_post:"$_id"},pipeline:[{$match:{$expr:{$eq:["$post_id","$$liked_post"]},user_id:i,is_active:!0}}],as:"liked"}},{$project:{like_count:1,comment_count:1,share_count:1,download_count:1,user_id:1,url:1,title:1,section:1,mime_type:1,ext:1,created:1,liked:{$size:"$liked"},"section_details._id":1,"section_details.value":1,"section_details.url":1}},{$sort:{_id:-1}},{$skip:o},{$limit:n}]);case 11:p=e.sent,r.status(200).send({data:p,count:c}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),r.status(400).send({error:e.t0});case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))),function(e,t){return R.apply(this,arguments)}),postLiked:(T=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body.post_id.trim(),o=!0===t.body.flag?1:-1,e.prev=2,n=o>0,e.next=6,i.a.findOneAndUpdate({user_id:f.a.Types.ObjectId(t.user._id),post_id:f.a.Types.ObjectId(a)},{is_active:n},{upsert:!0});case 6:return e.next=8,s.a.findOneAndUpdate({_id:a},{$inc:{like_count:o}},{new:!0});case 8:d=e.sent,r.status(200).send({data:d}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.status(400).send({error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),function(e,t){return T.apply(this,arguments)}),queryTest:(U=j(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.updateMany({},{liked:!1,like_count:0,comment_count:0,share_count:0});case 3:a=e.sent,r.status(200).send({data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return U.apply(this,arguments)}),postComments:(E=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body.post_id.trim(),o=t.body.text.trim(),n=new d.a({user_id:t.user._id,post_id:a,text:o}),e.prev=2,e.next=5,n.save();case 5:return e.sent,e.next=8,s.a.findOneAndUpdate({_id:a},{$inc:{comment_count:1}},{new:!0});case 8:i=e.sent,r.status(200).send({data:i}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.status(400).send({error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),function(e,t){return E.apply(this,arguments)}),listComments:(O=j(regeneratorRuntime.mark((function e(t,r){var a,o,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body.post_id,o=f.a.Types.ObjectId(t.user._id),e.prev=2,e.next=5,d.a.aggregate([{$match:{post_id:f.a.Types.ObjectId(a),is_active:!0}},{$lookup:{from:"users",localField:"user_id",foreignField:"_id",as:"user_details"}},{$unwind:"$user_details"},{$lookup:{from:"liked_comments",let:{liked_comment:"$_id"},pipeline:[{$match:{$expr:{$eq:["$comment_id","$$liked_comment"]},post_id:f.a.Types.ObjectId(a),user_id:f.a.Types.ObjectId(t.user._id),is_active:!0}}],as:"liked"}},{$project:(s={points:1,created:1,liked:{$size:"$liked"},user_id:1,post_id:1,text:1,"user_details._id":1,"user_details.name":1,"user_details.profile_pic":1},i="user_details._id",u=1,i in s?Object.defineProperty(s,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[i]=u,s)},{$set:{current_user:{$eq:["$user_id",o]}}},{$sort:{created:-1}}]);case 5:n=e.sent,r.status(200).send({data:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r.status(400).send({error:e.t0});case 12:case"end":return e.stop()}var s,i,u}),e,null,[[2,9]])}))),function(e,t){return O.apply(this,arguments)}),upvoteComments:(x=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body.comment_id,o=t.body.post_id,n=!0===t.body.flag?1:-1,e.prev=3,s=n>0,e.next=7,u.a.findOneAndUpdate({user_id:f.a.Types.ObjectId(t.user._id),comment_id:f.a.Types.ObjectId(a),post_id:f.a.Types.ObjectId(o)},{is_active:s},{upsert:!0});case 7:return e.next=9,d.a.findOneAndUpdate({_id:f.a.Types.ObjectId(a)},{$inc:{points:n}},{new:!0});case 9:i=e.sent,r.status(200).send({data:i}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r.status(400).send({error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[3,13]])}))),function(e,t){return x.apply(this,arguments)}),deleteComment:(H=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body,o=a.comment_id,n=a.post_id,e.prev=1,e.next=4,d.a.findOneAndUpdate({_id:f.a.Types.ObjectId(o),user_id:f.a.Types.ObjectId(t.user._id),post_id:f.a.Types.ObjectId(n)},{is_active:!1});case 4:return s=e.sent,e.next=7,u.a.findOneAndUpdate({user_id:f.a.Types.ObjectId(t.user._id),comment_id:f.a.Types.ObjectId(o),post_id:f.a.Types.ObjectId(n)},{is_active:!1});case 7:r.status(200).send({data:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r.status(400).send({error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),function(e,t){return H.apply(this,arguments)}),downloadContent:(S=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,o=a.content_url,n=a.post_id,e.prev=1,e.next=4,_()({uri:o,encoding:null});case 4:return i=e.sent,e.next=7,s.a.findOneAndUpdate({_id:f.a.Types.ObjectId(n)},{$inc:{download_count:1}},{new:!0});case 7:e.sent,r.status(200).send(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.status(400).send({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e,t){return S.apply(this,arguments)}),reportPost:(D=j(regeneratorRuntime.mark((function e(t,r){var a,o,n,i,d,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body,o=a.post_id,n=a.report_reason,i=a.report_text,e.prev=1,e.next=4,s.a.findOneAndUpdate({_id:f.a.Types.ObjectId(o)},{is_active:!1});case 4:return d=new l.a({text:i,reason:n,user_id:f.a.Types.ObjectId(t.user._id),post_id:f.a.Types.ObjectId(o)}),e.next=7,d.save();case 7:u=e.sent,r.status(200).send({data:u}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.status(400).send({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e,t){return D.apply(this,arguments)}),serverRealTimeNotifications:function(e,t){t.status(200).set({connection:"keep-alive","cache-control":"no-cache","content-Type":"text/event-stream"});var r=Date.now();t.write("data: ".concat(r,"\n\n"))}};t.a=B,(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(N.register(w,"s3","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/controllers/posts.controller.js"),N.register(B,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/controllers/posts.controller.js")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("passport")},function(e,t,r){"use strict";(function(e){var a;r(4);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,n,s={googleCallback:function(e,t){t.redirect("/")},facebookCallback:function(e,t){t.redirect("/")},googleAuthenticate:function(e,t){e.user?t.status(200).send({user:e.user}):t.send({user:null})},allLogout:function(e,t){e.logout(),t.redirect("/")},authenticate:function(e,t,r){if(!e.user)return t.status(403).send({error:"No token provided"});r()}};t.a=s,(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(s,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/controllers/users.controller.js"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({user_id:{type:n.a.Schema.ObjectId,ref:"users"},url:{type:String},poster_url:{type:String},slug:{type:String},title:{type:String},liked:{type:Boolean,default:u.DEFAULT_FALSE},like_count:{type:Number,default:u.DEFAULT_COUNT},comment_count:{type:Number,default:u.DEFAULT_COUNT},share_count:{type:Number,default:u.DEFAULT_COUNT},download_count:{type:Number,default:u.DEFAULT_COUNT},tags:[{type:String}],section:{type:n.a.Schema.ObjectId,ref:"sections"},content_type:{type:Number,default:u.DEFAULT_CONTENT_TYPE},mime_type:{type:String},ext:{type:String},is_new:{type:Boolean,default:u.DEFAULT_TRUE},is_hide:{type:Boolean,default:u.DEFAULT_FALSE},is_nsfw:{type:Boolean,default:u.DEFAULT_FALSE},width:{type:Number},height:{type:Number},duration:{type:Number,default:u.DEFAULT_COUNT},size:{type:Number},liker_list:[{type:n.a.Schema.ObjectId,ref:"users"}],is_active:{type:Boolean,default:u.DEFAULT_TRUE},crawled:{type:Boolean,default:u.DEFAULT_FALSE},crawled_source:{type:String},crawled_source_url:{type:String},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),c=n.a.model("posts",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/posts.model.js"),i.register(l,"Posts","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/posts.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/posts.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({post_id:{type:n.a.Schema.ObjectId,ref:"posts"},user_id:{type:n.a.Schema.ObjectId,ref:"users"},parent_id:{type:n.a.Schema.ObjectId,ref:"comments"},points:{type:Number,default:u.DEFAULT_COUNT},liked:{type:Boolean,default:u.DEFAULT_FALSE},replies_count:{type:Number,default:u.DEFAULT_COUNT},text:{type:String},is_active:{type:Boolean,default:u.DEFAULT_TRUE},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),c=n.a.model("comments",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/comments.model.js"),i.register(l,"Comments","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/comments.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/comments.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({url:{type:String},title:{type:String},s3_url:{type:String},slug_id:{type:String},mime_type:{type:String},ext:{type:String},post_uploaded:{type:Boolean,default:u.DEFAULT_FALSE},source:{type:String},crawled_source:{type:Number,default:u.CRAWLED_TYPE.DEFAULT},next_cursor:{type:String},section:{type:n.a.Schema.ObjectId,ref:"sections"},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),c=n.a.model("external_urls",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/external.url.model.js"),i.register(l,"externalUrls","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/external.url.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/external.url.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=r(9),i=r.n(s),d=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=d.a.DB,l=new n.a.Schema({name:{type:String,trim:!0,required:!0,unique:!0},email:{type:String,trim:!0,required:!0,unique:!0},password_hash:{type:String,trim:!0},password_salt:{type:String,trim:!0},gender:{type:Number,default:u.GENDER.MALE},dob:{type:Date},country:{type:Number},profile_pic:{type:String},description:{type:String},badgets:{type:Number,default:u.BADGETS.NOOBIE},accounts:{facebook:{type:String},google:{type:String}},account_type:{type:Number,default:u.DEFAULT_ACCOUNT_TYPE},account_id:{type:String},favourite_sections:[{type:Number}],created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}});l.virtual("password").set((function(e){this._password=e,this.password_salt=this.makeSalt(),this.password_hash=this.encryptPassword(e)})).get((function(){return this._password})),l.methods={authenticate:function(e){return this.encryptPassword(e)===this.password_hash},encryptPassword:function(e){if(!e)return"";try{return i.a.createHmac("sha1",this.password_salt).update(e).digest("hex")}catch(e){return""}},makeSalt:function(){return Math.round((new Date).valueOf()*Math.random())+""}};var c,p,f=n.a.model("users",l);t.a=f,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/users.model.js"),c.register(l,"UserSchema","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/users.model.js"),c.register(f,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/users.model.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=(r(9),r(1));(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({user_id:{type:n.a.Schema.ObjectId,ref:"users"},post_id:{type:n.a.Schema.ObjectId,ref:"posts"},is_active:{type:Boolean,default:u.DEFAULT_TRUE},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),c=n.a.model("liked_posts",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/liked_posts.model.js"),i.register(l,"likePosts","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/liked_posts.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/liked_posts.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=(r(9),r(1));(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({user_id:{type:n.a.Schema.ObjectId,ref:"users"},comment_id:{type:n.a.Schema.ObjectId,ref:"comments"},post_id:{type:n.a.Schema.ObjectId,ref:"posts"},is_active:{type:Boolean,default:u.DEFAULT_TRUE},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),c=n.a.model("liked_comments",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/liked_comments.model.js"),i.register(l,"likedComments","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/liked_comments.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/liked_comments.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("request-promise")},function(e,t,r){"use strict";(function(e){var a,o=r(7),n=r.n(o),s=r(12),i=r.n(s),d=r(4),u=r.n(d),l=r(1),c=r(13),p=r.n(c),f=r(18),m=r(19),v=r(20),y=r(26),b=r.n(y),g=r(27),h=r.n(g);r(34);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var _=n()();_.use(b()()),_.use(p.a.urlencoded({limit:"10mb",extended:!0})),_.use(p.a.json({limit:"10mb",extended:!0}));var L=process.cwd();_.use(h()({maxAge:2592e6,keys:[l.a.COOKIEKEY]})),_.use(u.a.initialize()),_.use(u.a.session()),_.use(n.a.static(i.a.join(L,"public"))),_.use("/dist",n.a.static(i.a.join(L,"dist"))),_.use("/api",Object(m.a)(n.a.Router())),_.use("/api",Object(v.a)(n.a.Router())),_.get("*",(function(e,t){t.send(Object(f.a)())}));var G,k,j=_;t.a=j,(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(_,"app","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/express.js"),G.register(L,"CURRENT_WORKING_DIR","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/express.js"),G.register(j,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/express.js")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,o,n=function(){return'<!DOCTYPE html>\n        <html>\n        <head>\n            <meta charset=utf-8>\n            <meta name=viewport content="width=device-width,initial-scale=1">\n            <title>feelfunny: Get feel of the fun</title>\n            <meta name=keywords content="funny, image, gif, gifs, memes, jokes, image upload, upload image, lol, humor, vote, comment, share, feelfunny, feelfunny.app, wallpaper" />\n            <meta name=description content="Discover the magic of the internet at feelfunny, a entertainment destination. Lift your spirits with funny jokes, trending memes, entertaining gifs, inspiring stories, viral videos, and so much more." />\n            <meta name=copyright content="Copyright 2020 feelfunny, Inc." />\n         \n            \x3c!-- Global site tag (gtag.js) - Google Analytics --\x3e\n            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162054083-1"><\/script>\n            <script>\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag(\'js\', new Date());\n            gtag(\'config\', \'UA-162054083-1\');\n            <\/script>\n\n            \x3c!-- Fonts --\x3e\n            <link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">\n            <link href="/css/style.css" rel="stylesheet">\n        </head>\n        <body>\n                <div id="root"></div>\n                <script type="text/javascript" src="/dist/bundle.js"><\/script>\n        </body> \n    </html>'};t.a=n,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(n,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/template.js"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(4),n=r.n(o),s=r(5);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=function(e){return e.get("/auth/google",n.a.authenticate("google",{scope:["profile","email"]})),e.get("/auth/google/callback",n.a.authenticate("google"),s.a.googleCallback),e.get("/auth/facebook",n.a.authenticate("facebook",{scope:["profile","email"]})),e.get("/auth/facebook/callback",n.a.authenticate("facebook"),s.a.facebookCallback),e.get("/logout",s.a.allLogout),e.get("/authenticate",s.a.googleAuthenticate),e};t.a=u,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(u,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/routes/users.routes.js"),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(3),n=r(5);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var s,i,d=function(e){return e.get("/ask-post-updates",o.a.serverRealTimeNotifications),e.get("/list-sections",o.a.listSections),e.get("/list-tags",o.a.listTags),e.post("/list-posts",o.a.listPosts),e.post("/list-usersposts",n.a.authenticate,o.a.listOfUsersPosts),e.get("/query-test",o.a.queryTest),e.get("/download-content",o.a.downloadContent),e.post("/list-comments",n.a.authenticate,o.a.listComments),e.post("/upvote-comments",n.a.authenticate,o.a.upvoteComments),e.post("/delete-comments",n.a.authenticate,o.a.deleteComment),e.post("/report-post",n.a.authenticate,o.a.reportPost),e.post("/upload-s3",o.a.uploadImagetoS3),e.post("/upload-posts",o.a.uploadPost),e.post("/post-liked",n.a.authenticate,o.a.postLiked),e.post("/post-comments",n.a.authenticate,o.a.postComments),e};t.a=d,(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/routes/posts.routes.js"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({value:{type:String},description:{type:String},url:{type:String},is_active:{type:Boolean,default:u.DEFAULT_TRUE},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),c=n.a.model("sections",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/sections.model.js"),i.register(l,"Sections","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/sections.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/sections.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({name:{type:String},created:{type:Date,default:Date.now},is_active:{type:Boolean,default:u.DEFAULT_TRUE},updated:{type:Date},comment:{type:String}}),c=n.a.model("tags",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/tags.model.js"),i.register(l,"Tags","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/tags.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/tags.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,o=r(0),n=r.n(o),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,d,u=s.a.DB,l=new n.a.Schema({text:{type:String},reason:{type:String},user_id:{type:n.a.Schema.ObjectId,ref:"users"},post_id:{type:n.a.Schema.ObjectId,ref:"posts"},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),c=n.a.model("report_posts",l);t.a=c,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/report_posts.model.js"),i.register(l,"Reportposts","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/report_posts.model.js"),i.register(c,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/report_posts.model.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("uuid/v4")},function(e,t){e.exports=require("aws-sdk")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("cookie-session")},function(e,t){e.exports=require("passport-google-oauth20")},function(e,t,r){r(30),e.exports=r(31)},function(e,t){e.exports=require("babel-polyfill")},function(e,t,r){"use strict";r.r(t);var a=r(1),o=r(0),n=r.n(o),s=r(17);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;n.a.Promise=global.Promise,n.a.connect(a.a.MONGO_URI,{useNewUrlParser:!0}),n.a.connection.on("error",(function(){throw new Error("unable to connect to database")})),s.a.listen(a.a.port,(function(e){e&&console.log(e),console.info("Server started on port %s.",a.a.port)}))},function(e,t,r){"use strict";(function(e){var t,a=r(0),o=r.n(a),n=r(1);(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var s,i,d=n.a.DB,u=new o.a.Schema({url:{type:String},source:{type:String},crawled_source:{type:Number,default:d.CRAWLED_TYPE.DEFAULT},next_cursor:{type:String},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),l=o.a.model("latest_cursor",u);(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(d,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/latest_cursor.model.js"),s.register(u,"latestCursor","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/latest_cursor.model.js"),s.register(l,"default","/Users/himanshusavita/Documents/live-projects/friendskit-front/server/models/latest_cursor.model.js")),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("node-cron")},function(e,t,r){"use strict";var a=r(4),o=r.n(a),n=r(28),s=r(11),i=r(1);function d(e,t,r,a,o,n,s){try{var i=e[n](s),d=i.value}catch(e){return void r(e)}i.done?t(d):Promise.resolve(d).then(a,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var n=e.apply(t,r);function s(e){d(n,a,o,s,i,"next",e)}function i(e){d(n,a,o,s,i,"throw",e)}s(void 0)}))}}"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;o.a.serializeUser((function(e,t){t(null,e.id)})),o.a.deserializeUser(function(){var e=u(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.findOne({_id:t});case 2:a=e.sent,r(null,a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),o.a.use(new n.Strategy({clientID:i.a.LOGIN_KEYS.GOOGLE.CLIENT,clientSecret:i.a.LOGIN_KEYS.GOOGLE.SECRET,callbackURL:"/api/auth/google/callback"},function(){var e=u(regeneratorRuntime.mark((function e(t,r,a,o){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.findOne({account_id:a.id});case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",o(null,n));case 5:return e.next=7,new s.a({name:a.emails[0].value,email:a.displayName,account_type:1,account_id:a.id,profile_pic:a.photos[0].value}).save();case 7:i=e.sent,o(null,i);case 9:case"end":return e.stop()}}),e)})));return function(t,r,a,o){return e.apply(this,arguments)}}()))}]);